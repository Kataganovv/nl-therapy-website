#!/bin/bash

echo "üîç –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ FTP —Å–µ—Ä–≤–µ—Ä—É"
echo "======================================"

read -p "–í–≤–µ–¥–∏—Ç–µ FTP —Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: ftp.your-domain.com): " FTP_SERVER
read -p "–í–≤–µ–¥–∏—Ç–µ FTP –ª–æ–≥–∏–Ω: " FTP_USER

echo "–ü—Ä–æ–±—É–µ–º –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ $FTP_SERVER..."
echo "–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å - –≤–≤–µ–¥–∏—Ç–µ –µ–≥–æ"

# –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
timeout 10 sftp -o ConnectTimeout=5 "$FTP_USER@$FTP_SERVER" << 'EOL'
pwd
ls
quit
EOL

if [ $? -eq 0 ]; then
    echo "‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!"
else
    echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ."
fi
